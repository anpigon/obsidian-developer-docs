이 페이지는 [[Editor extensions|에디터 확장 기능]]을 위한 상태 관리에 대한 소개를 제공합니다.

> [!note]
> 이 페이지는 Obsidian 플러그인 개발자를 위해 공식 CodeMirror 6 문서를 요약한 것입니다. 상태 관리에 대한 더 자세한 정보는 [State and Updates](https://codemirror.net/docs/guide/#state-and-updates)를 참조하세요.

## 상태 변경
대부분의 애플리케이션에서는 속성이나 변수에 새 값을 할당하여 상태를 업데이트합니다. 결과적으로 이전 값은 영원히 사라집니다.

```ts
let note = '';
note = 'Heading'
note = '# Heading'
note = '## Heading' // 이 변경을 어떻게 취소할까요?
```

사용자 작업 공간에 대한 변경 사항을 실행 취소/다시 실행하는 기능을 지원하기 위해 Obsidian과 같은 애플리케이션은 대신 모든 변경 사항의 기록을 유지합니다. 변경 사항을 취소하려면 변경 전의 시점으로 돌아갈 수 있습니다.

|   | 상태      |
|---|------------|
| 0 |            |
| 1 | Heading    |
| 2 | # Heading  |
| 3 | ## Heading |

TypeScript에서는 다음과 같이 표현할 수 있습니다:

```ts
const changes: ChangeSpec[] = [];

changes.push({ from: 0, insert: 'Heading' });
changes.push({ from: 0, insert: '# ' });
changes.push({ from: 0, insert: '#' });
```

## 트랜잭션
텍스트를 선택하고 큰따옴표 `"`를 눌러 선택 영역 양쪽에 따옴표를 추가하는 기능을 상상해 보세요. 이 기능을 구현하는 한 가지 방법은:

1. 선택 영역 시작에 `"` 삽입
2. 선택 영역 끝에 `"` 삽입

구현에는 _두 개_의 상태 변경이 포함됩니다. 이를 실행 취소 기록에 추가하면 사용자는 각 따옴표에 대해 한 번씩 _두 번_ 실행 취소해야 합니다. 이를 피하기 위해 이러한 변경 사항을 그룹화하여 하나로 표시할 수 있다면 어떨까요?

에디터 확장 기능에서 함께 발생하는 상태 변경 그룹을 _트랜잭션_이라고 합니다.

지금까지 배운 내용을 결합하고 단일 상태 변경만 포함하는 트랜잭션을 허용한다면 상태를 _트랜잭션 기록_으로 간주할 수 있습니다.

앞서 언급한 따옴표 감싸기 기능을 에디터 확장 기능으로 구현하려면 다음과 같이 에디터 뷰에 트랜잭션을 추가(또는 _전달_)합니다:

```ts
view.dispatch({
  changes: [
    { from: selectionStart, insert: `"` },
    { from: selectionEnd, insert: `"` }
  ]
});
```

## 다음 단계
이 페이지에서는 상태를 일련의 상태 변경으로 모델링하는 방법과 이를 트랜잭션으로 그룹화하는 방법에 대해 배웠습니다.

에디터에서 사용자 정의 상태를 관리하는 방법을 배우려면 [[State fields]]를 참조하세요.
